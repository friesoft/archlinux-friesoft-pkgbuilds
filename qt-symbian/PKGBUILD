# Contributor: Bernhard Friedreich <friesoft@gmail.com>

pkgname=qt-symbian
pkgver=4.6.3
pkgrel=2
pkgdesc="Qt for symbian"
url="http://brunoabinader.blogspot.com/2010/06/unofficial-qt-463-for-symbian-linux.html"
license=('GPL')
arch=('i686' 'x86_64')
depends=('wine' 'zlib' 'openssl' 'gnupoc')
[ "$CARCH" == "x86_64" ] && depends=('bin32-wine' 'zlib' 'openssl')
install=qt-symbian.install

build() {
  cd $srcdir

   if [ -d downloads ]; then
    cd downloads
  else
    mkdir downloads
    cd downloads
  fi

  wget -c http://get.qt.nokia.com/qt/source/qt-symbian-opensource-4.6.3.exe
  wget -c http://get.qt.nokia.com/qt/solutions/qt-mobility-symbian-opensource-1.0.0.zip
  wget -c http://get.qt.nokia.com/nokiasmartinstaller/nokiasmartinstallerforsymbian-0.18beta.zip
  wget -c http://franciscoalecrim.com/abinader/qt_for_symbian_4.6.3_all_in_one_linux_installer_v2.sh
  wget -c http://martin.st/symbian/gnupoc-package-1.15.tar.gz

  install -d $pkgdir/opt/qt463symbian
  export EPOCROOT=/opt/gnupoc1_15/symbian-sdks/5.0/
  export PATH=$pkgdir/opt/qt463symbian/bin:/opt/gnupoc1_15/bin:$PATH

  chmod +x qt_for_symbian_4.6.3_all_in_one_linux_installer_v2.sh
  ./qt_for_symbian_4.6.3_all_in_one_linux_installer_v2.sh $srcdir/downloads $pkgdir/opt/qt463symbian
}
