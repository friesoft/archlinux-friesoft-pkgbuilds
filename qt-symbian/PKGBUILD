# Contributor: Bernhard Friedreich <friesoft@gmail.com>

pkgname=qt-symbian
pkgver=4.6.3
pkgrel=1
pkgdesc="Qt for symbian"
url="http://brunoabinader.blogspot.com/2010/06/unofficial-qt-463-for-symbian-linux.html"
license=('GPL')
arch=('i686' 'x86_64')
depends=('wine' 'zlib' 'openssl')
[ "$CARCH" == "x86_64" ] && depends=('bin32-wine' 'zlib' 'openssl')
install=qt-symbian.install

build() {
  cd $srcdir

   if [ -d downloads ]; then
    cd downloads
  else
    mkdir downloads
    cd downloads
  fi

  wget -c -O S60_5th_Edition_SDK_v1_0_en.zip http://sw.nokia.com/id/577ad48d-290c-4bb5-8bdf-779ea8a5bc6c/S60_5th_Edition_SDK_v1_0_en.zip
  wget -c -O s60_open_c_cpp_plug_in_v1_6_en.zip http://qdrive.net/index.php/page-file_share-choice-download_file-id_file-161544-ce-0
  wget -c http://www.codesourcery.com/public/gnu_toolchain/arm-none-symbianelf/gnu-csl-arm-2005Q1C-arm-none-symbianelf-i686-pc-linux-gnu.tar.bz2
  wget -c http://martin.st/symbian/gnupoc-package-1.15.tar.gz
  wget -c http://franciscoalecrim.com/lizardo/gnupoc_1.15_installer_v2.sh
  wget -c http://get.qt.nokia.com/qt/source/qt-symbian-opensource-4.6.3.exe
  wget -c http://get.qt.nokia.com/qt/solutions/qt-mobility-symbian-opensource-1.0.0.zip
  wget -c http://get.qt.nokia.com/nokiasmartinstaller/nokiasmartinstallerforsymbian-0.18beta.zip
  wget -c http://franciscoalecrim.com/abinader/qt_for_symbian_4.6.3_all_in_one_linux_installer_v2.sh

  install -d $pkgdir/opt/gnupoc1_15
  ./gnupoc_1.15_installer_v2.sh $srcdir/downloads $pkgdir/opt/gnupoc1_15 5.0

  install -d $pkgdir/opt/qt463symbian
  export EPOCROOT=$pkgdir/opt/gnupoc1_15/symbian-sdks/5.0/
  export PATH=$pkgdir/opt/qt463symbian/bin:$pkgdir/opt/gnupoc1_15/bin:$PATH

  ./qt_for_symbian_4.6.3_all_in_one_linux_installer_v2.sh $srcdir/downloads $pkgdir/opt/qt463symbian
}
